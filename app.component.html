<div *ngIf="isHeaderRendered"
     style="position: fixed; top: 30px"
     class="animated fadeIn d-flex justify-content-between w-100 px-5">
  <img alt="logo"
       src="../assets/logo-sbcib.svg"/>
  <button nz-button
          [nzType]="selectedIndex ? 'default' : 'primary'"
          (click)="onSwitchTab()"> {{selectedIndex ? 'Back' : 'Sign in'}}
  </button>
</div>
<div *ngIf="!selectedIndex"
     style="position: fixed; left: 15%"
     class="animated fadeIn">
  <div class="phrase-appear">
    <div class="phrase-opacity">
      <h1 style="font-size: 60px; margin-top: 30vh">
        Algo<span class="text-primary font-weight-bold">/</span>Platform
      </h1>
      <p style="font-size: 16px" class="font-weight-bold">Set. Start. Rule the market</p>
    </div>
  </div>
</div>
<nz-tabset style="top: 120px"
           class="position-absolute w-100"
           [nzTabBarStyle]="{'display': 'none'}"
           [(nzSelectedIndex)]="selectedIndex">
  <nz-tab></nz-tab>
  <nz-tab>
    <div class="d-flex justify-content-center">
      <app-request-wrapper [request$]="login$">
        <nz-card style="width:350px" class="border-dark rounded">
          <app-reactive-input fieldId="login" label="Login"
                              [control]="fg.get('login')">
          </app-reactive-input>
          <app-reactive-input fieldId="password" label="Password"
                              type="password"
                              [control]="fg.get('password')">
          </app-reactive-input>
          <div class="d-flex justify-content-center">
            <button nz-button
                    nzType="primary"
                    nzShape="round"
                    style="width: 200px"
                    (click)="onSubmit()"> Sign in
            </button>
          </div>
        </nz-card>
      </app-request-wrapper>
    </div>
  </nz-tab>
  <nz-tab>
    <div class="d-flex justify-content-center">
      <ng-template nz-tab>
        <app-request-wrapper #scopesResponse [request$]="scopes$">
          <div class="d-flex justify-content-center">
            <div *ngIf="scopesResponse.data?.length else noInfoTmp"
                 class="d-flex flex-row flex-nowrap">

              <nz-card *ngFor="let item of scopesResponse.data"
                       style="width: 300px"
                       class="mx-2"
                       [nzActions]="[navigationActionTmp]">
                <nz-card-meta [nzTitle]="item['applicationName']"
                              [nzDescription]="item['applicationDescription']"
                              [nzAvatar]="avatarTemplate">
                </nz-card-meta>
                <ng-template #avatarTemplate>
                  <nz-avatar [nzText]="item['applicationName'] | acronym"></nz-avatar>
                </ng-template>
                <ng-template #navigationActionTmp>
                  <a [href]="item['applicationPath']">Go to</a>
                </ng-template>
              </nz-card>
            </div>
          </div>
        </app-request-wrapper>
      </ng-template>
    </div>
  </nz-tab>
</nz-tabset>
<div id="scene">
  <div data-depth="0.4">
    <nz-tabset style="width: 100vw; height: 600px"
               class="position-absolute"
               [nzTabBarStyle]="{'display': 'none'}"
               [(nzSelectedIndex)]="selectedIndex">
      <nz-tab>
        <div class="candles-appear position-relative">
          <div style="top: 30vh; right: 15%; width: 450px" class="position-absolute">
            <div class="position-relative">
              <div *ngFor="let candle of candles let index = index"
                   class="position-absolute"
                   [ngStyle]="{'top': candle.top, left: index * 25 + 'px'}">
                <img *ngIf="candle.isRendered"
                     class="animated fadeIn"
                     [width]="candle.width"
                     [src]="'../assets/candle-' + (index + 1) + '.svg'"
                     [alt]="'candle_' + index"/>
              </div>
            </div>
          </div>
        </div>
      </nz-tab>
      <nz-tab></nz-tab>
    </nz-tabset>
  </div>
  <div data-depth="0.5">
    <ng-container *ngIf="isTrue200Delay">
      <div class="periodic-hesitation"></div>
      <div class="bottom-top">
        <div style="position: relative; width: 100vw; height: 100vh">
          <img alt="wave-back"
               style="position: absolute; bottom: 1%; width: 120%; left: -10%"
               src="../assets/wave-back.svg"/>
        </div>
      </div>
    </ng-container>
  </div>
  <div data-depth="0.6">
    <div style="position: relative; width: 100vw; height: 100vh">
      <ng-container *ngIf="isTrue400Delay">
        <div class="periodic-hesitation"></div>
        <div class="bottom-top">
          <img alt=""
               style="position: absolute; bottom: 0; width: 120%; left: -10%"
               src="../assets/wave-front.svg"/>
        </div>
      </ng-container>
    </div>
  </div>
  <div data-depth="0.7">
    <div style="position: relative; width: 100vw; height: 100vh">
      <ng-container *ngIf="isTrue900Delay">
        <div class="bottom-top">
          <img alt=""
               style="position: absolute; bottom: 20%; width: 3%; left: 6%"
               src="../assets/value-1.svg"/>
          <img alt=""
               style="position: absolute; bottom: 10%; width: 1%; left: 13%"
               src="../assets/front-2.svg"/>
          <img alt=""
               style="position: absolute; bottom: 17%; width: 1%; left: 38%"
               src="../assets/front-3.svg"/>
          <img alt=""
               style="position: absolute; bottom: 10%; width: 4%; left: 62%"
               src="../assets/value-2.svg"/>
          <img alt=""
               style="position: absolute; bottom: 15%; width: 1%; left: 68%"
               src="../assets/front-4.svg"/>
          <img alt=""
               style="position: absolute; bottom: 4%; width: 1%; left: -6%"
               src="../assets/front-1.svg"/>
          <img alt=""
               style="position: absolute; bottom: 30%; width: 3%; left: 84%"
               src="../assets/value-3.svg"/>
          <img alt=""
               style="position: absolute; bottom: 0; width: 3%; left: 2%"
               src="../assets/value-4.svg"/>
          <img alt=""
               style="position: absolute; bottom: 20%; width: 3%; left: 24%"
               src="../assets/value-5.svg"/>
          <img alt=""
               style="position: absolute; bottom: 0; width: 2.5%; left: 40%"
               src="../assets/value-6.svg"/>
          <img alt=""
               style="position: absolute; bottom: 3%; width: 3%; left: 76%"
               src="../assets/value-7.svg"/>
        </div>
      </ng-container>
    </div>
  </div>
  <div data-depth="0.8">
    <ng-container *ngIf="isTrue300Delay">
      <div class="periodic-hesitation"></div>
      <div class="bottom-top">
        <div style="position: relative; width: 100vw; height: 100vh">
          <img alt=""
               style="position: absolute; bottom: 0; width: 104%; left: -8%"
               src="../assets/wave-line.svg"/>
          <img alt=""
               style="position: absolute; bottom: 1%; width: 4%; left: 17%"
               src="../assets/mini-earth-1.svg"/>
          <img alt=""
               style="position: absolute; bottom: 15%; width: 6%; left: 53%"
               src="../assets/mini-earth-2.svg"/>
        </div>
      </div>
    </ng-container>
  </div>
  <div data-depth="0.9">
    <div style="position: relative; width: 100vw; height: 100vh">
      <img alt=""
           style="position: absolute; bottom: -7%; width: 24%; left: 87%"
           src="../assets/logo-right.svg"/>
    </div>
  </div>
</div>


<ng-template #noInfoTmp>
  <p class="text-center">No data to display</p>
</ng-template>
